#!/usr/bin/env sh

# This is very basic at the moment. We could do with more make style
# build tool and checks the input dates to see if it actually needs rebuilding.

mkdir -p public/posts
rm public/posts/*.html

echo "## Generating HTML posts"
for md_file in posts/*.md; do
  base_name=$(basename "$md_file" .md)
  multimarkdown parse -r "$md_file" > "public/posts/${base_name}.html"
done

echo "## Generating index.html and post-processing posts"
cargo run

echo "## Generating 404.html"
multimarkdown parse -r pages/404.md > public/404.html

echo "## Generating about.html"
multimarkdown parse -r pages/about.md > public/about.html

